"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.contentTypeFactory = exports.getMimeType = exports.DEFAULT_CONTENT_TYPE = void 0;
const fileType = require("file-type");
const mime = require("mime");
const http_1 = require("../../+internal/http");
exports.DEFAULT_CONTENT_TYPE = http_1.ContentType.APPLICATION_JSON;
exports.getMimeType = (body, path) => {
    const mimeFromBuffer = Buffer.isBuffer(body) && fileType(body);
    return mimeFromBuffer
        ? mimeFromBuffer.mime
        : mime.getType(path) || exports.DEFAULT_CONTENT_TYPE;
};
exports.contentTypeFactory = (data) => ({
    'Content-Type': data.status < 400
        ? exports.getMimeType(data.body, data.path)
        : exports.DEFAULT_CONTENT_TYPE,
});
