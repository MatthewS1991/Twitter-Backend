"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.HttpRequestMetadataStorage = exports.HttpRequestMetadataStorageToken = void 0;
const context_reader_factory_1 = require("../../../context/context.reader.factory");
const context_token_factory_1 = require("../../../context/context.token.factory");
exports.HttpRequestMetadataStorageToken = context_token_factory_1.createContextToken('HttpRequestMetadataStorage');
exports.HttpRequestMetadataStorage = context_reader_factory_1.createReader(() => {
    const storage = new Map();
    const set = (key, metadata) => {
        if (key && metadata)
            storage.set(key, metadata);
    };
    const get = (key) => {
        const metadata = storage.get(key);
        storage.delete(key);
        return metadata;
    };
    const size = () => storage.size;
    return {
        set,
        get,
        size,
    };
});
