"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.logger$ = void 0;
const core_1 = require("@marblejs/core");
const operators_1 = require("rxjs/operators");
const logger_handler_1 = require("./logger.handler");
exports.logger$ = (opts = {}) => (req$, ctx) => {
    const logger = core_1.useContext(core_1.LoggerToken)(ctx.ask);
    return req$.pipe(operators_1.timestamp(), operators_1.tap(stamp => logger_handler_1.loggerHandler(opts, logger)(stamp).subscribe()), operators_1.map(({ value: req }) => req));
};
